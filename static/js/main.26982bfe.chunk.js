(this.webpackJsonpgui=this.webpackJsonpgui||[]).push([[0],{207:function(e,t){},307:function(e,t,a){"use strict";(function(e){var n=a(7),r=a.n(n),s=a(30),l=a(308),i=a(309),c=a(327),o=a(328),u=a(0),p=a.n(u),d=a(59),m=a(120),h=a(60),g=a(772),y=a(79),f=(a(650),new Intl.NumberFormat),_={game_address:window.location.hash.replace("#",""),all_rooms:[],community_cards:[],my_hand:[{},{}],player_a_hand:[{},{}],player_b_hand:[{},{}],player_a:"",player_a_bet:0,player_a_wallet:0,player_b:"",player_b_bet:0,player_b_wallet:0,stage:"",turn:"",new_room_name:""},b=function(t){Object(o.a)(n,t);var a=Object(c.a)(n);function n(e){var t;return Object(l.a)(this,n),(t=a.call(this,e)).state=Object.assign({},_),t}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=Object(s.a)(r.a.mark((function e(){var t,a,n,l,i,c,o,u,h,g=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.onhashchange=Object(s.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==window.location.hash){e.next=3;break}return g.setState(Object.assign({},_)),e.abrupt("return");case 3:g.setState({game_address:window.location.hash.replace("#","")});case 4:case"end":return e.stop()}}),e)}))),(t=localStorage.getItem("mnemonic"))||(t=m.generateMnemonic(),localStorage.setItem("mnemonic",t)),(a=localStorage.getItem("tx_encryption_seed"))?a=Uint8Array.from(JSON.parse("[".concat(a,"]"))):(a=d.EnigmaUtils.GenerateNewSeed(),localStorage.setItem("tx_encryption_seed",a)),e.next=7,d.Secp256k1Pen.fromMnemonic(t);case 7:n=e.sent,l=d.pubkeyToAddress(d.encodeSecp256k1Pubkey(n.pubkey),"secret"),i=new d.SigningCosmWasmClient("https://bootstrap.int.testnet.enigma.co",l,(function(e){return n.sign(e)}),a,{init:{amount:[{amount:"0",denom:"uscrt"}],gas:"500000"},exec:{amount:[{amount:"0",denom:"uscrt"}],gas:"500000"}}),this.setState({secretJsClient:i,myWalletAddress:l,mnemonic:t}),c=function(){var e=Object(s.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.getContracts(11);case 2:t=e.sent,g.setState({all_rooms:t});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),setTimeout(c,0),setInterval(c,1e3),o=function(){var e=Object(s.a)(r.a.mark((function e(){var t,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==window.location.hash){e.next=2;break}return e.abrupt("return");case 2:if(g.state.player_a&&g.state.player_b&&(g.state.player_a===g.state.myWalletAddress||g.state.player_b===g.state.myWalletAddress)){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,t=+localStorage.getItem(g.state.game_address),e.next=8,i.queryContractSmart(g.state.game_address,{get_my_hand:{secret:t}});case 8:a=e.sent,console.log("set hand",a),g.setState({my_hand:a}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(){return e.apply(this,arguments)}}(),setTimeout(o,0),setInterval(o,1e3),u=function(){var e=Object(s.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.getAccount(l);case 2:(t=e.sent)?g.setState({myWalletBalance:"(".concat(f.format(+t.balance[0].amount/1e6)," SCRT)")}):g.setState({myWalletBalance:p.a.createElement("span",null,"(No funds - Go get some at"," ",p.a.createElement("a",{href:"https://faucet.testnet.enigma.co",rel:"noopener noreferrer",target:"_blank"},"https://faucet.testnet.enigma.co"),")")});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),setTimeout(u,0),setInterval(u,1e4),h=function(){var e=Object(s.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==window.location.hash){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,i.queryContractSmart(g.state.game_address,{get_public_data:{}});case 5:0===(t=e.sent).player_a_hand.length&&(t.player_a_hand=[{},{}]),0===t.player_b_hand.length&&(t.player_b_hand=[{},{}]),g.state.myWalletAddress===t.player_a?g.setState({player_a_hand:g.state.my_hand,player_b_hand:t.player_b_hand}):g.state.myWalletAddress===t.player_b?(console.log("player b!"),g.setState({player_a_hand:t.player_a_hand,player_b_hand:g.state.my_hand})):g.setState({player_a_hand:t.player_a_hand,player_b_hand:t.player_b_hand}),g.setState({community_cards:t.community_cards,player_a:t.player_a,player_a_bet:t.player_a_bet,player_a_wallet:t.player_a_wallet,player_b:t.player_b,player_b_bet:t.player_b_bet,player_b_wallet:t.player_b_wallet,stage:t.stage,starter:t.starter,turn:t.turn}),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(2);case 14:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}(),setTimeout(h,0),setInterval(h,3e3);case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createRoom",value:function(){var e=Object(s.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.state.secretJsClient.instantiate(11,{},this.state.new_room_name);case 2:this.setState({new_room_name:""});case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"joinRoom",value:function(){var t=Object(s.a)(r.a.mark((function t(){var a,n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.state.game_address){t.next=2;break}return t.abrupt("return");case 2:return(a=+localStorage.getItem(this.state.game_address))||(n=d.EnigmaUtils.GenerateNewSeed(),a=e.from(n.slice(0,8)).readUInt32BE(0)),t.next=6,this.state.secretJsClient.execute(this.state.game_address,{join:{secret:a}});case 6:localStorage.setItem(this.state.game_address,a);case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"fold",value:function(){var e=Object(s.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.state.secretJsClient.execute(this.state.game_address,{fold:{}});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"check",value:function(){var e=Object(s.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.state.secretJsClient.execute(this.state.game_address,{check:{}});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"call",value:function(){var e=Object(s.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.state.secretJsClient.execute(this.state.game_address,{call:{}});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"raise",value:function(){var e=Object(s.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.state.secretJsClient.execute(this.state.game_address,{raise:{amount:1e4}});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;if(""===window.location.hash)return p.a.createElement("div",{style:{color:"white"}},p.a.createElement(h.Table,null,p.a.createElement("div",{style:{position:"absolute",top:0,left:0,padding:10}},p.a.createElement("div",null,"You: ",this.state.myWalletAddress," ",this.state.myWalletBalance)),p.a.createElement("center",null,p.a.createElement("div",null,p.a.createElement(g.a.Input,{value:this.state.new_room_name,onChange:function(t,a){var n=a.value;return e.setState({new_room_name:n})}}),p.a.createElement(y.a,{onClick:this.createRoom.bind(this)},"Create!")),p.a.createElement("br",null),p.a.createElement("div",null,"All rooms"),this.state.all_rooms.map((function(e,t){return p.a.createElement("div",{key:t},e.label,": ",p.a.createElement("a",{href:"#"+e.address},e.address))})))));var t=this.state.stage;t.includes("EndedWinner")?(t=t.replace("EndedWinner",""),t="Player ".concat(t," Wins!")):t.includes("EndedDraw")?t="It's a Tie!":"WaitingForPlayersToJoin"===t?t=p.a.createElement("span",null,p.a.createElement("div",null,"Waiting for players"),p.a.createElement(y.a,{disabled:this.state.player_a&&this.state.player_a===this.state.myWalletAddress||this.state.player_b&&this.state.player_b===this.state.myWalletAddress,onClick:this.joinRoom.bind(this)},"Join")):t&&(t+=" betting round");var a="Player A",n="->";this.state.turn===this.state.player_b&&(a="Player B",n="<-"),a="Turn: "+a,this.state.stage&&!this.state.stage.includes("Ended")||(a="",n=""),this.state.turn||(a="",n="");var r="";return this.state.game_address&&(r="Room: "+this.state.game_address),p.a.createElement("div",{style:{color:"white"}},p.a.createElement(h.Table,null,p.a.createElement("div",{style:{position:"absolute",top:0,left:0,padding:10}},p.a.createElement("div",null,"You: ",this.state.myWalletAddress," ",this.state.myWalletBalance)),p.a.createElement("div",{style:{position:"absolute",top:0,right:0,padding:10}},p.a.createElement("a",{href:"/#"},"Return to loby")),p.a.createElement("div",{style:{position:"absolute",width:"100%",textAlign:"center"}},p.a.createElement("center",null,p.a.createElement("div",null,r),p.a.createElement("div",null,t),p.a.createElement("div",null,a),p.a.createElement("div",null,n)),p.a.createElement("br",null),this.state.community_cards.map((function(e,t){return v(e,!0,t)})),p.a.createElement("center",null,p.a.createElement("div",{style:{padding:35}},p.a.createElement("span",{style:{marginRight:250}},"Total Bet: ",f.format(this.state.player_b_bet)),p.a.createElement("span",null,"Total Bet: ",f.format(this.state.player_a_bet))))),p.a.createElement("center",null,p.a.createElement("div",{style:{position:"absolute",bottom:0,right:0,padding:10}},p.a.createElement("div",null,"Player A",this.state.player_a===this.state.myWalletAddress?" (You)":""),p.a.createElement("div",null,"Credits left: ",f.format(this.state.player_a_wallet)),p.a.createElement("div",null,this.state.player_a))),p.a.createElement(h.Hand,{style:{position:"absolute",right:"35vw"},cards:this.state.player_a_hand.map((function(e){return v(e)}))}),p.a.createElement("center",null,p.a.createElement("div",{style:{position:"fixed",bottom:0,padding:10,width:"100%",textAlign:"center"}},p.a.createElement(y.a,{onClick:this.check.bind(this),disabled:!this.state.turn||this.state.turn!==this.state.myWalletAddress},"Check"),p.a.createElement(y.a,{onClick:this.call.bind(this),disabled:!this.state.turn||this.state.turn!==this.state.myWalletAddress},"Call"),p.a.createElement(y.a,{onClick:this.raise.bind(this),disabled:!this.state.turn||this.state.turn!==this.state.myWalletAddress},"Raise"),p.a.createElement(y.a,{onClick:this.fold.bind(this),disabled:!this.state.turn||this.state.turn!==this.state.myWalletAddress},"Fold"))),p.a.createElement("center",null,p.a.createElement("div",{style:{position:"absolute",bottom:0,left:0,padding:10}},p.a.createElement("div",null,"Player B"," ",this.state.player_b===this.state.myWalletAddress?" (You)":""),p.a.createElement("div",null,"Credits left: ",f.format(this.state.player_b_wallet)),p.a.createElement("div",null,this.state.player_b))),p.a.createElement(h.Hand,{style:{position:"absolute",left:"23vw"},cards:this.state.player_b_hand.map((function(e){return v(e)}))})))}}]),n}(p.a.Component);function v(e){var t,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=e.suit,s=e.value;return e.value&&e.suit?(r=r[0],t="Two"===s?"2":"Three"===s?"3":"Four"===s?"4":"Five"===s?"5":"Six"===s?"6":"Seven"===s?"7":"Eight"===s?"8":"Nine"===s?"9":"Ten"===s?"10":s[0],a?p.a.createElement(h.Card,{key:n,face:t,suit:r}):{face:t,suit:r}):a?p.a.createElement(h.Card,{key:n}):{}}t.a=b}).call(this,a(20).Buffer)},339:function(e,t,a){e.exports=a(771)},344:function(e,t,a){},348:function(e,t){},370:function(e,t){},372:function(e,t){},423:function(e,t){},424:function(e,t){},468:function(e,t){},470:function(e,t){},519:function(e,t){},562:function(e,t,a){var n={"./2C.png":563,"./2D.png":564,"./2H.png":565,"./2S.png":566,"./3C.png":567,"./3D.png":568,"./3H.png":569,"./3S.png":570,"./4C.png":571,"./4D.png":572,"./4H.png":573,"./4S.png":574,"./5C.png":575,"./5D.png":576,"./5H.png":577,"./5S.png":578,"./6C.png":579,"./6D.png":580,"./6H.png":581,"./6S.png":582,"./7C.png":583,"./7D.png":584,"./7H.png":585,"./7S.png":586,"./8C.png":587,"./8D.png":588,"./8H.png":589,"./8S.png":590,"./9C.png":591,"./9D.png":592,"./9H.png":593,"./9S.png":594,"./AC.png":595,"./AD.png":596,"./AH.png":597,"./AS.png":598,"./BACK.png":599,"./JC.png":600,"./JD.png":601,"./JH.png":602,"./JS.png":603,"./KC.png":604,"./KD.png":605,"./KH.png":606,"./KS.png":607,"./QC.png":608,"./QD.png":609,"./QH.png":610,"./QS.png":611,"./TC.png":612,"./TD.png":613,"./TH.png":614,"./TS.png":615,"./extra/aces.png":616,"./extra/back.png":617,"./extra/bridge-back-blue.png":618,"./extra/bridge-back-gray.png":619,"./extra/bridge-back-green.png":620,"./extra/bridge-back-purple.png":621,"./extra/bridge-back-red.png":622,"./extra/bridge-back-yellow.png":623,"./extra/bridge-backs.png":624,"./extra/honor-clubs.png":625,"./extra/honor-diamonds.png":626,"./extra/honor-hearts.png":627,"./extra/honor-spades.png":628};function r(e){var t=s(e);return a(t)}function s(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=s,e.exports=r,r.id=562},629:function(e,t,a){var n={"./black.png":630,"./blue.png":631,"./green.png":632,"./red.png":633,"./white.png":634};function r(e){var t=s(e);return a(t)}function s(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=s,e.exports=r,r.id=629},635:function(e,t,a){var n={"./burlap.png":636,"./cardboard.png":637,"./default-light.png":638,"./default.png":639,"./fabric.png":640,"./felt.png":641,"./leather.png":642,"./noise.png":643,"./paper.png":644,"./pinstripe.png":645,"./slate.png":646,"./subtle.png":647,"./suede.png":648,"./twill.png":649};function r(e){var t=s(e);return a(t)}function s(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=s,e.exports=r,r.id=635},771:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(57),l=a.n(s),i=(a(344),a(307));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(i.a,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[339,1,2]]]);
//# sourceMappingURL=main.26982bfe.chunk.js.map